<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
   <h2>Historial ClÃ­nico del Paciente #{{ pacienteId }}</h2>
   <ul *ngIf="historialClinico.length > 0; else sinDatos">
        <li *ngFor="let historial of historialClinico">
            ğŸ—“ {{ historial.fecha | date:'short' }} - ğŸ§¾ {{ historial.diagnostico }}<br>
                ğŸ’Š {{ historial.tratamiento }}<br>
                ğŸ“ {{ historial.observaciones }}
        </li> 
   </ul> 
   
   <ng-template #sinDatos>
     <p>No hay historial clÃ­nico para este paciente.</p>
   </ng-template>
   <button *ngIf="isAdmin || isRecepcionista || isVeterinario"  (click)="crearNuevoHistorial()">â•</button>
   <button (click)="auth.logout()">ğŸšª Cerrar sesiÃ³n</button>
   <button (click)="auth.volverLogin()">ğŸ”™ Volver al login</button>
   <div *ngIf="historialClinicoSeleccionado">
  <h3>Nuevo Historial Clinico</h3>
  <form (ngSubmit)="agregarHistorial()" #form="ngForm"> 
    <input type="datetime-local" [(ngModel)]="historialClinicoSeleccionado.fecha" name="fecha" required>
    <input type="text" [(ngModel)]="historialClinicoSeleccionado.diagnostico" name="diagnostico" required> 
    <input type="text" [(ngModel)]="historialClinicoSeleccionado.tratamiento" name="tratamiento" required> 
    <input type="text" [(ngModel)]="historialClinicoSeleccionado.observaciones" name="observaciones" required> 
    <button type="submit">ğŸ’¾ Guardar</button>
    <button type="button" (click)="cancelarEdicion()">âŒ Cancelar</button>
  </form>
</div>
</body>
</html>
